<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta id="viewport" content="width=device-width, initial-scale=1.0">
  <title>El rey del mueble</title>
  <link rel="stylesheet" href="css/global.css">
  <link rel="stylesheet" href="css/detallesblog.css">
  <script rel="preload" type="module" src="componentes/header/headerComponent.js"></script>
  <script rel="preload" type="module" src="componentes/footer/footerComponent.js"></script>
</head>
<body>
  <header-component></header-component>
  <main id="main">
    <section class="content_blog">
      <img src="" alt="Esperando los datos de la petición">
      <article class="content_info">
        <!-- Contenido donde cargara los datos de la peticion -->
      </article>
    </section>
  </main>
  <footer-component></footer-component>
  <script>
    // Obtiene el valor de los parámetros
    let params = new URLSearchParams(window.location.search);
    let idblog = params.get('id');
    // Hacer la peticion a una API
    fetch(`api/blogs.json`)
      .then(rest => rest.json())
      .then(json => {
        // Verificar que exista el blog
        
        const [data] = json.filter(blog => blog.id == idblog);
        if(!data) location.href = "index.html";
        const {id, title, urlBlog, date, descript} = data;
        // Cargar la imagen
        const $img = document.querySelector(".content_blog img");
        $img.src = urlBlog;
        $img.alt = title;
        // Mostrar la respuesta a los detalles
        console.log(data);
        const $info = document.querySelector(".content_blog .content_info");
        $info.innerHTML = `
          <h1>${title}</h1>
          <div class="date">${date}</div>
          <div class="content"> ${descript} </div>
          <div class="align-btn">
            <button class="btn_buy" id="btn_regresar">Regresar</button>
          </div>
        `;
        returnbtn();
      })

      function returnbtn() {
        const $returnbtn = document.getElementById("btn_regresar");
        $returnbtn.addEventListener("click", e => {
          window.location.href = "index.html";
        })
      }
  </script>
</body>
</html>